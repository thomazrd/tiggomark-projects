const SAAS_CONNECTOR_BASE_URL="http://localhost:4200/#",MODAL_ID="modal-saas-connector-lightbox-id",MODAL_CLASS="modal-saas-connector-lightbox",MODAL_CONTENT_CLASS="modal-saas-connector-lightbox-content",CLOSE_BUTTON_CLASS="modal-saas-connector-lightbox-close",IFRAME_ID="modal-saas-connector-lightbox-preview-frame";let saasConnectorAppId;function createModal(){console.log("Creating modal...");var modal=document.createElement("div"),modalContent=(modal.id=MODAL_ID,modal.style.display="none",modal.style.position="fixed",modal.style.zIndex=500,modal.style.left=0,modal.style.top=0,modal.style.width="100%",modal.style.height="100%",modal.style.overflow="auto",modal.style.backgroundColor="rgba(0, 0, 0, 0.5)",document.createElement("div")),closeBtn=(modalContent.className=MODAL_CONTENT_CLASS,modalContent.style.position="relative",modalContent.style.backgroundColor="#fefefe",modalContent.style.margin="auto",modalContent.style.padding="0",modalContent.style.border="1px solid #888",modalContent.style.width="80%",modalContent.style.height="80%",modalContent.style.maxHeight="700px",document.createElement("span")),iframe=(closeBtn.className=CLOSE_BUTTON_CLASS,closeBtn.innerHTML="&times;",closeBtn.style.position="absolute",closeBtn.style.top="10px",closeBtn.style.right="10px",closeBtn.style.fontSize="30px",closeBtn.style.fontWeight="bold",closeBtn.style.color="#aaa",closeBtn.style.cursor="pointer",document.createElement("iframe"));return iframe.id=IFRAME_ID,iframe.name=IFRAME_ID,iframe.frameBorder="0",iframe.setAttribute("noresize","noresize"),iframe.style.width="100%",iframe.style.backgroundColor="#fff",modalContent.appendChild(closeBtn),modalContent.appendChild(iframe),modal.appendChild(modalContent),modal}function adjustIframeHeight(){document.getElementById(IFRAME_ID).style.height=window.innerHeight+"px"}function openPlanSubscriptionFlow(options){saasConnectorAppId||log.error("SaasConnector Lightbox ERROR - Você deve definir o id da aplicação na importação do arquivo .js"),console.log("appId: "+saasConnectorAppId),console.log("openPlanSubscriptionFlow, options: ",options);var key,modal=document.getElementById(MODAL_ID),iframe=document.getElementById(IFRAME_ID),params={},searchParams=(params.appId=saasConnectorAppId,options.userToken&&(params.user=options.userToken),new URLSearchParams);for(key in params)searchParams.set(key,params[key]);options=SAAS_CONNECTOR_BASE_URL+"/subscription-flow";options+="?"+searchParams.toString(),console.log("URL: "+options),modal.style.display="block",iframe.src=options}document.body.appendChild(createModal()),window.addEventListener("load",adjustIframeHeight),window.addEventListener("resize",adjustIframeHeight);const modal=document.getElementById(MODAL_ID),closeBtn=document.querySelector("."+CLOSE_BUTTON_CLASS),scriptUrl=(closeBtn.addEventListener("click",()=>{modal.style.display="none",document.getElementById(IFRAME_ID).src=""}),window.addEventListener("click",event=>{event.target===modal&&(modal.style.display="none",document.getElementById(IFRAME_ID).src="")}),document.currentScript.src),url=new URL(scriptUrl),saasConnector=(saasConnectorAppId=url.searchParams.get("APP_ID"),console.log("Param APP_ID = "+saasConnectorAppId),{showSubscriptionFlow:openPlanSubscriptionFlow});